import{g as p,N as f}from"./app-XOvmieRm.js";function v(a,e,n){const t=document.createElement("div");t.classList.add("post-container"),t.style.cursor="pointer";const r=document.createElement("div");r.classList.add("post-header");const s=document.createElement("div");s.classList.add("author-info");let o=e.author||n;const d=document.createElement("img");d.style.cursor="pointer",d.src=o?.avatar?.url,d.alt=o?.avatar?.alt||`${o?.name}`,d.addEventListener("click",c=>{c.stopPropagation(),window.location.href=`./../profile/index.html?user=${encodeURIComponent(o.name)}`});const i=document.createElement("p");i.textContent=o?.name||"Unknown",s.append(d,i);const l=document.createElement("p");l.textContent=h(e.created),r.append(s,l);const m=document.createElement("h2");if(m.textContent=e.title,t.append(r,m),e.body){const c=document.createElement("p");c.textContent=e.body,t.append(c)}if(e.media?.url){const c=document.createElement("img");c.classList.add("post-image"),c.src=e.media.url,c.alt=e.media.alt||"Post image",t.append(c)}const u=w(e);u&&t.append(u),t.addEventListener("click",()=>{y(e)}),a.append(t)}function h(a){const e=new Date(a),t=Math.floor((new Date-e)/1e3),r=Math.floor(t/60),s=Math.floor(r/60),o=Math.floor(s/24);return t<60?"now":r<60?`${r} min`:s<24?`${s} hrs`:o===1?"1 day":`${o} days`}function w(a){const e=p(),n=document.createElement("button");n.classList.add("btn","primary-border");const t=a.author?.name||a.owner;return e!==t?null:(n.textContent="Edit Post",n.addEventListener("click",()=>{window.location.href=`/posts/edit.html?id=${encodeURIComponent(a.id)}`}),n)}async function y(a){document.querySelector(".overlay-bg")?.remove(),document.querySelector(".post-overlay")?.remove();const e=document.createElement("div"),n=document.createElement("div");e.classList.add("overlay-bg"),n.classList.add("post-overlay");let t=null;if(window.location.pathname==="/profile/index.html"){const r=new f,o=new URLSearchParams(window.location.search).get("user");t=await r.profile.view(o)}v(n,a,t),document.body.append(e,n),e.addEventListener("click",()=>{e.remove(),n.remove()})}export{v as c};
