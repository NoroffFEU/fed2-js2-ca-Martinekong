import{g as p,N as f}from"./app-mBL9h0wB.js";function h(r,e,n){const t=document.createElement("div");t.classList.add("post-container");const o=document.createElement("div");o.classList.add("post-header");const s=document.createElement("div");s.classList.add("author-info");let a=e.author||n;const d=document.createElement("img");d.style.cursor="pointer",d.src=a?.avatar?.url,d.alt=a?.avatar?.alt||`${a?.name}`,d.addEventListener("click",c=>{c.stopPropagation(),window.location.href=`./../profile/index.html?user=${encodeURIComponent(a.name)}`});const i=document.createElement("p");i.textContent=a?.name||"Unknown",s.append(d,i);const l=document.createElement("p");l.textContent=w(e.created),o.append(s,l);const m=document.createElement("h2");if(m.textContent=e.title,t.append(o,m),e.body){const c=document.createElement("p");c.textContent=e.body,t.append(c)}if(e.media?.url){const c=document.createElement("img");c.classList.add("post-image"),c.src=e.media.url,c.alt=e.media.alt||"Post image",t.append(c)}const u=v(e);u&&t.append(u),window.location.pathname.includes("feed.html")&&(t.style.cursor="pointer",t.addEventListener("click",()=>{y(e)})),r.append(t)}function w(r){const e=new Date(r),t=Math.floor((new Date-e)/1e3),o=Math.floor(t/60),s=Math.floor(o/60),a=Math.floor(s/24);return t<60?"now":o<60?`${o} min`:s<24?`${s} hrs`:a===1?"1 day":`${a} days`}function v(r){const e=p(),n=document.createElement("button");n.classList.add("btn","primary-border");const t=r.author?.name||r.owner;return e!==t?null:(n.textContent="Edit Post",n.addEventListener("click",o=>{o.stopPropagation(),window.location.href=`./../posts/edit.html?id=${encodeURIComponent(r.id)}`}),n)}async function y(r){document.querySelector(".overlay-bg")?.remove(),document.querySelector(".post-overlay")?.remove();const e=document.createElement("div"),n=document.createElement("div");e.classList.add("overlay-bg"),n.classList.add("post-overlay");let t=null;if(window.location.pathname==="/profile/index.html"){const o=new f,a=new URLSearchParams(window.location.search).get("user");t=await o.profile.view(a)}h(n,r,t),document.body.append(e,n),e.addEventListener("click",()=>{e.remove(),n.remove()})}export{h as c};
